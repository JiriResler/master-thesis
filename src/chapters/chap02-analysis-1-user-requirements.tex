\chapter{Analysis}
Our first step is to define what should the application be able to do and also for whom it is created.
For this reason we identify user roles and their requirements. 
After that specify use cases of each user role and describe those via use case scenarios.

\section{Target group}
The application will focus on restaurants and their guests in the European Union.
The reason behind this is that the EU enforces restaurants to inform their guests about allergens contained in the food they serve, and has already established rules for how to do it.
We would like for the application to be usable internationally, so it needs to have its user interface translated into different languages.
For this purpose we will choose the English, Slovak and Czech languages with the possibility of adding more translations in the future.

\section{User roles}
There are two types of users who will come in contact with the application.
The first type is a \textbf{restaurant}, more specifically its employee who is responsible for creating menus.
This user needs to have a basic understanding of how to use a web browser either on a computer or on a smartphone.
The application will allow restaurant employees to create menus online and will help them with specifying allergens contained in menu items.

The second type of user is a restaurant \textbf{guest}.
They, too, need to have a basic understanding of how to use a web browser either on a computer or on a smartphone.
The application will enable a restaurant guest to create a personal profile where they will specify their food preferences, including the allergies they have and the diets they are on.
When a guest will view a restaurant's menu using the application, the displayed menu will be adapted to meet the guest's profile preferences.
The application will thus make it easier for the guest to choose what they would like to order in a particular restaurant.

\newpage

\section{User requirements}
It is good practice to use language consistently throughout requirements and that is why we are going to resolve what keywords will we use and what will they mean.
If a requirement states that the application \textbf{shall} do something then it means that the requirement is mandatory for the application and has to be addressed in the design phase which follows after this chapter. 
The word \textbf{should} is used in requirements which are desired by users but are not critical for the application's usability.
Last but not least, usage of the word \textbf{must} indicates a domain constraint.
Also, we will substitute the user role restaurant for \emph{restaurant employee} where it will be more convenient.
\todo[inline]{make a footnote a link a reader can follow}
This list of requirements is inspired by interviewing a restaurant\footnote{\url{pizzabudca.sk}  \label{fnlabel}} employee and also two former restaurant\footnote{\url{sokolzabreh.cz/hospudka}  \label{fnlabel}} owners.

\todo[inline]{Check numbering of requirements - also references in reqs}
\todo[inline]{Add text between headings}
\subsection{Functional requirements}
\subsubsection{Guest user role requirements}
A guest is expected to be logged in to the application if not stated otherwise in a requirement.

\begin{description}
    \item [Req. 1.1:] The application shall enable a restaurant guest to specify what allergies they have.
    \item [Req. 1.2:] The application shall enable a restaurant guest to specify what diets they are on.
    \item [Req. 1.3:] The application should enable a restaurant guest to specify what food ingredients they like and dislike.
    \item [Req. 1.4:] The application shall be able to save a guest's dietary preferences.
    \item [Req. 1.5:] The application shall visually distinguish menu items which the guest can eat from menu items which the guest cannot eat.

    \emph{Rationale:} A guest should have no problem identifying which items are suitable for them. 
    \item [Req. 1.6:] The application should highlight allergens in a menu which the guest is allergic to.
    \item [Req. 1.7:] The application shall be able to filter out meals of a menu which a guest cannot eat.
    \item [Req. 1.8:] The application shall be able to sort meals in a menu by whether a guest can eat them.
    \item [Req. 1.9:] The application should display a text with information that the menu does not contain any items which are suitable for the guest.

    \emph{Rationale:} For example the information can be that the menu does not contain any vegetarian foods.
    \item [Req. 1.10:] A guest shall be able to view a menu by scanning a QR code.
    \item [Req. 1.11:] A guest should be able to look up a restaurant by its name.
    \item [Req. 1.12:] A guest should be able to view a detail of a restaurant.

    \emph{Rationale:} A restaurant detail can for example link to all of the restaurant's menus. 
    \item [Req. 1.13:] A guest shall be able to add a restaurant to the list of their favorite restaurants.
    
    \emph{Rationale:} The guest's list of favorite restaurants is used in the application's functionality like the requirement 1.14.
    \item [Req. 1.14:] A guest shall be able to see an overview of currently served meals by their favorite restaurants.
    \item [Req. 1.15:] The application should be able to translate a menu to the current language of the user interface.

    \emph{Rationale:} The menu language should adapt to the language of the user interface.
    \item [Req. 1.16:] A non-authenticated guest should have access to the application's functionalities stated in requirements 1.1, 1.2, 1.5-1.12 and 1.15.  
    
    \emph{Rationale:} None of these features require a guest to be logged in or have a dietary profile.
\end{description}

\subsubsection{Restaurant user role requirements}
\begin{description}
    \item [Req. 2.1:] A restaurant employee shall be able to create a menu for a specific day.

    \emph{Rationale:} Restaurants often have daily menus.
    \item [Req. 2.2:] A restaurant employee shall be able to create a stable menu.

    \emph{Rationale:} Most restaurants have a stable menu which is valid every day and does not change often.
    \item [Req. 2.3:] A restaurant employee should be able to create a list of beverages.

    \emph{Rationale:} Some restaurants have a separate menu for meals and for drinks.
    \item [Req. 2.4:] A restaurant employee should be able to print a QR code for a menu.

    \emph{Rationale:} The QR code can be added to a paper menu, or it can be placed on tables instead of the paper menu
   
    \item [Req. 2.6:] The application shall enable a restaurant employee to edit a previously created menu.
    \item [Req. 2.7:] The application shall enable a restaurant employee to delete a previously created menu.
    \item [Req. 2.8:] A restaurant employee should be able to set a daily menu to repeat periodically for a certain day of the week.

    \emph{Rationale:} A daily menu can be the same for a certain day of the week.
    \item [Req. 2.9:] A restaurant employee should be able to specify categories and subcategories of a menu.

    \emph{Rationale:} A menu typically consists of categories like soups, appetizers, desserts etc. These categories can have subcategories, for instance a category "Drinks" can have subcategories "Wine" and "Non-alcoholic".
    \item [Req. 2.10:] If a menu consists of categories then each menu item should be in exactly one category.
    \item [Req. 2.11:] A category in a menu should not be empty.   
    \item [Req. 2.12:] A meal in a menu should contain an ID, label, price, weight or volume, ingredients and allergens.
    \item [Req. 2.13:] A restaurant employee should be able to specify weights of ingredients contained in a meal.

    \emph{Rationale:} The weight in the requirement 2.12 is the weight of the whole meal, i.e. all ingredients' weights summed up.
    \item [Req. 2.14:] A menu should optionally contain a restaurant's name, address, telephone number and opening hours.
    \item [Req. 2.15:] A restaurant employee should be able to use a previously created menu as the starting point for creating a new menu.

    \emph{Rationale:} A restaurant employee might want to create a new menu which differs only in some items of an existing menu.
    \item [Req. 2.16:] A restaurant employee should be able to specify what currency to use in a menu.
    \item [Req. 2.17:] A restaurant employee should be able to specify what weight units to use in a menu.
    \item [Req. 2.18:] A restaurant employee should be able to specify what volume units to use for liquid items in a menu.
    \item [Req. x]: The application should provide an example of a menu.

    \emph{Rationale:} A user who is new to the application can easily see what they can make using the application.
    \item [Req. 2.21:] A restaurant employee should be able to set that a menu shall use allergen labels for displaying allergen information.
    \item [Req. 2.22:] A restaurant employee should be able to set that a menu shall use numbers for displaying allergen information.

    \emph{Rationale:} A menu item can contain numbers which represent allergens. This is more concise than using labels from the requirement 2.21.
    \item [Req. 2.21:] A restaurant employee should be able to set that a menu shall use allergen icons for displaying allergen information.
    \item [Req. 2.23:] A restaurant employee should be able to set what currency, weight and volume units to use as default in a menu.
  
    \emph{Rationale:} A restaurant might use the same units in all of its menus. The purpose of this requirement is to save restaurant employees from doing repetitive work when creating menus.
    \item [Req. 2.24:] A restaurant employee should be able to share a menu through the restaurant's Facebook, Twitter and Instagram accounts.
  \end{description}

\newpage

\subsection{Non-functional requirements}
\begin{description}
    \item [Req. 3.1:] Each item of a menu must have its allergens specified if it contains any.
    
    \emph{Rationale:} In the EU, there are laws\footnote{\url{http://data.europa.eu/eli/reg/2011/1169/2018-01-01}  \label{fnlabel}} which mandate restaurants to list allergens contained in the foods they serve.
    \item [Req. 3.2:] A menu which uses numbers for displaying allergen information must contain a legend explaining what allergen each number represents.

    \emph{Rationale:} This requirement extends the requirement 2.21.
    \item [Req. 3.3:] The application should have responsive user interface for mobile devices and desktops.
    \todo[inline]{add browser versions}
    \item [Req. 3.4:] The application should be compatible with the latest versions of all of the commonly used browsers, namely Google Chrome of version x.y, Mozilla Firefox of version x.y, Microsoft Edge of version x.y, Opera of version x.y and Safari of version x.y.
    \todo[inline]{describe each screen in design chapter}
    \item [Req. 3.5:] The application shall have a user tutorial explaining its functionality for each screen defined in the design chapter.
    \item [Req. 3.6:] The application should have English, Czech and Slovak translations of the user interface.

    \emph{Rationale:} We would like for the application to be used internationally within the European Union.
    \item [Req. 3.8:] A user of the application shall be able to specify where should the application store their data.

    \emph{Rationale:} A user should have control over their data.
\end{description}

\vspace*{\fill}