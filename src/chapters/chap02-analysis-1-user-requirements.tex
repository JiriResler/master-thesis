\chapter{Analysis}
Our first step is to define what should the application be able to do and also for whom it is created.
For this reason we identify user roles and their requirements. 
After that specify use cases of each user role and describe those via use case scenarios.

\section{Target group}
The application will focus on restaurants and their guests in the European Union.
The reason behind this is that the EU enforces restaurants to inform their guests about allergens contained in the food they serve, and has already established rules for how to do it.
We would like for the application to be usable internationally, so it needs to have its user interface translated into different languages.
For this purpose we will choose the English, Slovak and Czech languages with the possibility of adding more translations in the future.

\section{User roles}
There are two types of users who will come in contact with the application.
The first type is a \textbf{restaurant}, more specifically its employee who is responsible for creating menus.
This user needs to have a basic understanding of how to use a web browser either on a computer or on a smartphone.
The application will allow restaurant employees to create menus online and will help them with specifying allergens contained in menu items.

The second type of user is a restaurant \textbf{guest}.
They, too, need to have a basic understanding of how to use a web browser either on a computer or on a smartphone.
The application will enable a restaurant guest to create a personal profile where they will specify their food preferences, including the allergies they have and the diets they are on.
When a guest will view a restaurant's menu using the application, the displayed menu will be adapted to meet the guest's profile preferences.
The application will thus make it easier for the guest to choose what they would like to order in a particular restaurant.

\newpage

\section{User requirements}
It is good practice to use language consistently throughout requirements and that is why we are going to resolve what keywords will we use and what will they mean.
If a requirement states that the application \textbf{shall} do something then it means that the requirement is mandatory for the application and has to be addressed in the design phase which follows after this chapter. 
The word \textbf{should} is used in requirements which are desired by users but are not critical for the application's usability.
Last but not least, usage of the word \textbf{must} indicates a domain constraint.
Also, we will substitute the user role restaurant for \emph{restaurant employee} where it will be more convenient.

\subsection{Functional requirements}
Functional requirements are grouped by the user role which defines them.
\todo[inline]{make a footnote a link a reader can follow}
The list of requirements is inspired by interviewing a restaurant\footnote{\url{pizzabudca.sk}  \label{fnlabel}} employee and also two former restaurant\footnote{\url{sokolzabreh.cz/hospudka}  \label{fnlabel}} owners.

\subsubsection{Guest user role requirements}
A guest is expected to be logged in to the application if not stated otherwise in a requirement.

\todo[inline]{After exams - add sorting of menu items - by name, diet, price, personalized order based on what the guest likes and dislikes}
\todo[inline]{After exams - button for changing currency of menu - the application recalculates prices}
\begin{description}
    \item [R1.1:] The application shall enable a restaurant guest to specify what allergies they have.
    \item [R1.2:] The application shall enable a restaurant guest to specify what diets they are on.
    \item [R1.3:] The application should enable a restaurant guest to specify what food ingredients they like and dislike.
    \item [R1.4:] The application shall be able to save a guest's dietary preferences.
    \item [R1.5:] The application shall visually distinguish menu items which the guest can eat from menu items which the guest cannot eat.

    \emph{Rationale:} A guest should have no problem identifying which items are suitable for them. 
    \item [R1.6:] The application should highlight allergens in a menu which the guest is allergic to.
    \item [R1.7:] The application shall be able to filter out meals of a menu which a guest cannot eat.
    \item [R1.8:] The application shall be able to sort meals in a menu by whether a guest can eat them.
    \item [R1.9:] The application should display a text with information that the menu does not contain any items which are suitable for the guest.

    \emph{Rationale:} For example the information can be that the menu does not contain any vegetarian foods.
    \item [R1.10:] A guest shall be able to view a menu by scanning a QR code.
    \item [R1.11:] A guest should be able to look up a restaurant by its name.
    \item [R1.12:] A guest should be able to view a detail of a restaurant.

    \emph{Rationale:} A restaurant detail can for example link to all of the restaurant's menus. 
    \item [R1.13:] A guest shall be able to add a restaurant to the list of their favorite restaurants.
    
    \emph{Rationale:} The guest's list of favorite restaurants is used in the application's functionality like the requirement 1.14.
    \item [R1.14:] A guest shall be able to see an overview of currently served meals by their favorite restaurants.
    \item [R1.15:] The application should be able to translate a menu to the current language of the user interface.

    \emph{Rationale:} The menu language should adapt to the language of the user interface.
    \item [R1.16] A guest should be able to see the original version of a restaurant's menu with no personalization.
    \item [R1.17:] A non-authenticated guest should have access to the application's functionalities stated in requirements 1.5-1.12 and 1.15.  
    
    \emph{Rationale:} None of these features require a guest to be logged in or have a dietary profile.
\end{description}

\subsubsection{Restaurant user role requirements}
\begin{description}
    \item [R2.1:] A restaurant employee shall be able to create a menu for a specific day.

    \emph{Rationale:} Restaurants often have daily menus.
    \item [R2.2:] A restaurant employee shall be able to create a stable menu.

    \emph{Rationale:} Most restaurants have a stable menu which is valid every day and does not change often.
    \item [R2.3:] A restaurant employee should be able to create a list of beverages.

    \emph{Rationale:} Some restaurants have a separate menu for meals and for drinks.
    \item [R2.4:] A restaurant employee should be able to print a QR code for a menu.

    \emph{Rationale:} The QR code can be added to a paper menu, or it can be placed on tables instead of the paper menu
   
    \item [R2.5:] The application shall enable a restaurant employee to edit a previously created menu.
    \item [R2.6:] The application shall enable a restaurant employee to delete a previously created menu.
    \item [R2.7:] A restaurant employee should be able to set a daily menu to repeat periodically for a certain day of the week.

    \emph{Rationale:} A daily menu can be the same for a certain day of the week.
    \todo[inline]{After exams - a category can be a resource - it can have extra information - add category to ontology}
    \item [R2.8:] A restaurant employee should be able to create categories and subcategories of a menu.

    \emph{Rationale:} A menu typically consists of categories like soups, appetizers, desserts etc. These categories can have subcategories, for instance a category "Drinks" can have subcategories "Wine" and "Non-alcoholic".
    \item [R2.9:] A category in a menu should not be empty.   
    \item [R2.10:] A menu item should have an ID, label, price, weight or volume, description, ingredients and allergens.
    \item [R2.11:] Allergens of a menu item should be derived from the ingredients provided by the restaurant employee.

    \emph{Rationale:} A restaurant employee should be able to focus on creating the menu and not on specifying allergens.
    \item [R2.12:] A restaurant employee should be able to review and correct a menu item's allergens.

    \emph{Rationale:} Data about ingredients and their allergens can be outdated or vary based on the manufacturer of the ingredient.
    \item [R2.13:] A restaurant employee should be able to specify weights of ingredients contained in a meal.

    \emph{Rationale:} The weight in the requirement 2.11 is the weight of the whole meal, i.e. all ingredients' weights summed up.
    \item [R2.14:] A restaurant employee should be able to use a previously created menu as the starting point for creating a new menu.

    \emph{Rationale:} A restaurant employee might want to create a new menu which differs only in some items of an existing menu.
    \item [R2.15:] A restaurant employee should be able to use a currency of their choosing in a menu.

    \emph{Rationale:} Different menus can use different currencies based on what country the restaurant resides in.
    \item [R2.16:] A restaurant employee should be able to use weight and volume units of their choosing in a menu.

    \emph{Rationale:} Different menus can use different weight or volume units based on the region of the restaurant.
    \item [R2.17:] A restaurant employee should be able to share a menu through the restaurant's Facebook, Twitter and Instagram accounts.
    \item [R2.18:] A restaurant employee should be able to deactivate a menu.

    \emph{Rationale:} A restaurant employee might want to set that a menu is not valid without having to delete the menu.
    \item [R2.19:] A restaurant employee should be able to see an overview of their restaurant's menus.

    \emph{Rationale:} An overview screen serves for easily managing a restaurant's menus.
  \end{description}

\newpage

\subsection{Non-functional requirements}

\begin{description}
    \item [R3.1:] Each item of a menu must have its allergens specified if it contains any.
    
    \emph{Rationale:} In the European Union there are laws\footnote{\url{http://data.europa.eu/eli/reg/2011/1169/2018-01-01}  \label{fnlabel}} which mandate restaurants to list allergens contained in the foods they serve.
    \item [R3.2:] A menu which uses numbers for displaying allergen information must contain a legend explaining what allergen each number represents.

    \emph{Rationale:} This requirement extends the requirement 2.21.
    \item [R3.3:] The application should have responsive user interface for mobile devices and desktops.
    \todo[inline]{add browser versions}
    \item [R3.4:] The application should be compatible with the latest versions of all the commonly used browsers, namely Google Chrome of version x.y, Mozilla Firefox of version x.y, Microsoft Edge of version x.y, Opera of version x.y and Safari of version x.y.
    \todo[inline]{After exams - documentation}
    \item [R3.5:] The application shall have a user tutorial explaining its functionality for each screen defined in the design chapter.
    \item [R3.6:] The application should have English, Czech and Slovak translations of the user interface.

    \emph{Rationale:} We would like for the application to be used internationally within the European Union.
    \item [R3.7:] A user of the application shall be able to specify where should the application store their data.

    \emph{Rationale:} A user should have control over their data.
    \item [R3.8:] The application should provide a working example of a menu.

    \emph{Rationale:} A user who is new to the application can easily see what it is capable of.
\end{description}

\vspace*{\fill}